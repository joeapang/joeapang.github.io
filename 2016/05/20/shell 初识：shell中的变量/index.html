<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>shell 初识：shell中的变量 | IMan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="Shell,Linux" />
    
    <meta name="description" content="编译型语言和脚本语言无论大学毕业于计算机专业的程序员，还是半路出身的程序员，都应该是从编译型语言（如：C++,Java等）入门的。这类程序只要从源代码转换成目标代码，便能通过计算机来执行(Java 虽然并不是这样的，但也差不多是这种情况)。这种语言的好处就是高效，入门快。缺点也显而易见，运作于计算机底层，操作对象大多为字节，浮点数等等。很难直接操作于如系统目录这样的对象。而脚本语言不一样，脚本语言">
<meta property="og:type" content="article">
<meta property="og:title" content="shell 初识：shell中的变量">
<meta property="og:url" content="http://yoursite.com/2016/05/20/shell 初识：shell中的变量/index.html">
<meta property="og:site_name" content="IMan">
<meta property="og:description" content="编译型语言和脚本语言无论大学毕业于计算机专业的程序员，还是半路出身的程序员，都应该是从编译型语言（如：C++,Java等）入门的。这类程序只要从源代码转换成目标代码，便能通过计算机来执行(Java 虽然并不是这样的，但也差不多是这种情况)。这种语言的好处就是高效，入门快。缺点也显而易见，运作于计算机底层，操作对象大多为字节，浮点数等等。很难直接操作于如系统目录这样的对象。而脚本语言不一样，脚本语言">
<meta property="og:image" content="http://yoursite.com/images/程序相关示意图.jpg">
<meta property="og:updated_time" content="2016-05-24T02:51:09.900Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="shell 初识：shell中的变量">
<meta name="twitter:description" content="编译型语言和脚本语言无论大学毕业于计算机专业的程序员，还是半路出身的程序员，都应该是从编译型语言（如：C++,Java等）入门的。这类程序只要从源代码转换成目标代码，便能通过计算机来执行(Java 虽然并不是这样的，但也差不多是这种情况)。这种语言的好处就是高效，入门快。缺点也显而易见，运作于计算机底层，操作对象大多为字节，浮点数等等。很难直接操作于如系统目录这样的对象。而脚本语言不一样，脚本语言">
<meta name="twitter:image" content="http://yoursite.com/images/程序相关示意图.jpg">
    

    

    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/titillium-web/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/fancybox/jquery.fancybox.css">
    
    
        <link rel="stylesheet" href="/vendor/scrollLoading/style.css">
    
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">Life isn&#39;t so hard that we think!</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/"> 主页</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/archives"> 归档</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/一生所爱/">一生所爱</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/博客/">博客</a></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html"> 关于</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Cercar" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/博客/">博客</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <article id="post-shell 初识：shell中的变量" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        shell 初识：shell中的变量
        </h1>
    

            </header>
        
        <div class="article-subtitle">
            <a href="/2016/05/20/shell 初识：shell中的变量/" class="article-date">
    <time datetime="2016-05-20T05:37:51.000Z" itemprop="datePublished">2016-05-20</time>
</a>
            
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/">Shell</a></li></ul>

        </div>
        <div class="article-entry" itemprop="articleBody">
            <h2 id="编译型语言和脚本语言"><a href="#编译型语言和脚本语言" class="headerlink" title="编译型语言和脚本语言"></a>编译型语言和脚本语言</h2><p>无论大学毕业于计算机专业的程序员，还是半路出身的程序员，都应该是从编译型语言（如：C++,Java等）入门的。这类程序只要从源代码转换成目标代码，便能通过计算机来执行(Java 虽然并不是这样的，但也差不多是这种情况)。这种语言的好处就是高效，入门快。缺点也显而易见，运作于计算机底层，操作对象大多为字节，浮点数等等。很难直接操作于如系统目录这样的对象。<br>而脚本语言不一样，脚本语言也称之为解释型语言。这种语言能够轻易的操作文件与目录之类的对象。缺点就是效率不够高。通常情况下，脚本语言可以简洁的表达一个复杂的操作。脚本语言有很多，常见的Shell，awk，Python，Perl等等。</p>
<hr>
<p>##从Java到Shell</p>
<p>这无疑是一个痛苦的过程，习惯了面向对象语言的表达方式，学习Shell的时候会有一种整个世界都崩塌了的感觉。和我们打交道的不再是一个个对象，而是各种指令还有操作运算符，这会使的用惯了IDE的开发者们无从下手。</p>
<p>##什么Shell</p>
<p>对于操作系统有些概念的都应该听说过Shell，只要是操作系统，都离不开Shell，其实Shell并不是一门语言，可以说是一种工具，在Linux中，Shell是一种用户与计算机核心（Kernel）交互的工具。用户输入的命令通过Shell传递给Kernel，然后再作用于硬件，保证操作系统准确无误的运行。Shell作为计算机与操作系统交互的桥梁，其实用处还是很多的，它可以帮助你查看操作系统的登录信息，管理操作系统文件等等。</p>
<p>##Bash</p>
<p>由于早年的 Unix 年代，发展者众，所以由于 shell 依据发展者的不同就有许多的版本，例如常听到的 Bourne SHell (sh) 、在 Sun 里头默认的 C SHell、 商业上常用的 K SHell、, 还有 TCSH 等等，每一种 Shell 都各有其特点。Linux默认使用的Bash (Bourne Again SHell)。你可以在/etc/shells(Centos 5.x)下查看你能用多少种Shell。不同的Shell功能都差不多，但是语法语义都会有一些差距。Linux默认的Bash，所以下面也都是基于Bash写的。</p>
<hr>
<p>##Shell中的变量</p>
<p>对于有数学基础的人来说，变量这个词并不陌生。在Bash中变量的配置有着很严格的准则：</p>
<ul>
<li><p>变量与变量内容以等号连接，并且等号两边不能直接连接空格符号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">name=Joea #正确</span><br><span class="line">name = Joea #错误</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li>变量只能是英文字母，数字和下划线，并且开头不能是数字</li>
<li><p>变量内容中若有空格，则可以使用双引号或单引号将变量内容括起来，但是注意：</p>
<ul>
<li><p>双引号内的特殊字符如<em>$</em>等，可以保持原有的特性，如：<br>var=”name is $name” 则echo var 的结果为name is Joea</p>
</li>
<li><p>单引号中的特殊字符则为纯文本字符，如：<br>var=’name is $name’ 则echo var 的结果为name is $name</p>
</li>
</ul>
</li>
<li><p>在一串命令中，还需要藉由其他的命令提供的信息，可以使用反单引号<em>`</em> 或 <em>$</em>。如：<br>echo <code>ls -l /tmp</code> 可以得到：</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">total 628</span><br><span class="line">drwxr-xr-x. 2 root root   4096 May 22 18:30 hsperfdata_root</span><br><span class="line">drwx------. 2 joea joea   4096 May  3 14:36 keyring-f7NllU</span><br><span class="line">drwx------. 2 joea joea   4096 May  4 02:31 keyring-pW2CKY</span><br><span class="line">drwx------. 2 root root   4096 May 11 18:37 pulse-1w6S2HKpTeOH</span><br><span class="line">drwx------. 2 joea joea   4096 May 10 20:53 pulse-rOQRsAPfM4RE</span><br><span class="line">-rwxr-xr-x. 1 root root 557544 May  3 15:05 sqlite-3.7.2-libsqlitejdbc.so</span><br><span class="line">-rw-r--r--. 1 root root  51119 May 22 18:29 vgauthsvclog.txt.0</span><br><span class="line">drwx------. 2 root root   4096 May 22 18:30 vmware-root</span><br></pre></td></tr></table></figure>
<ol>
<li>可用跳脱字符<em>\</em>将特殊符号(如 <em>Enter</em>，<em>$</em>， <em>\</em>， 空格符， ‘等)变成一般字符；</li>
<li>若该变量为扩增变量内容时，则可用 <em>$变量名称</em> 或 <em>${变量}</em> 累加内容，如下所示：<br>name=”$name”Pang<br>可能看了下面的例子，就知道在shell中如何配置变量了：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@bogon bin]# 2name=Joea </span><br><span class="line">-bash: 2name=Joea: command not found  #显示错误，不能以数字开头</span><br><span class="line">[root@bogon bin]# name = Joea   </span><br><span class="line">-bash: name: command not found   #显示错误，因为等号两边有空格</span><br><span class="line">[root@bogon bin]# name=Joea #正确</span><br><span class="line"></span><br><span class="line">[root@bogon bin]# name=Joea&apos;s name</span><br><span class="line"></span><br><span class="line">\&gt;  # 单引号与双引号必须要成对，在上面的配置中仅有一个单引号，因此当你按下 enter 后，</span><br><span class="line">	# 你还可以继续输入变量内容。这与我们所需要的功能不同，失败啦！</span><br><span class="line">	# 记得，失败后要复原请按下 [ctrl]-c 结束！</span><br><span class="line">[root@bogon bin]# name=&quot;Joea&apos;s name&quot; #正确</span><br><span class="line">[root@bogon bin]# name=&apos;Joea&apos;s name&apos; #因为前面两个单引号已经成对，后面多了一个不成对的单引号</span><br><span class="line">[root@bogon bin]# name=Joea\&apos;s\ name #正确，用*\\*跳脱特殊字符，如空格，单引号</span><br></pre></td></tr></table></figure>
<p>###shell中的环境变量<br>环境变量可以帮我们达到很多的功能，如运行文件的搜索路径，提示字符的显示等等。我们可以用env和export来查看系统的环境变量：</p>
<ul>
<li>用env查看环境变量与常用环境变量的说明：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HOSTNAME=bogon  #主机名</span><br><span class="line">TERM=xterm  #这个终端机使用的环境是什么类型</span><br><span class="line">SHELL=/bin/bash  #目前环境下使用的Shell类型</span><br><span class="line">HISTSIZE=1000   #记录运行命令的条数</span><br><span class="line">SSH_CLIENT=192.168.137.1 1626 22  #远程登录的IP，端口号和接入端口号</span><br><span class="line">USER=root  #登录用户名</span><br><span class="line"></span><br><span class="line">MAIL=/var/spool/mail/root   #当前用户所取用的 mailbox 位置</span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin    #运行文件命令搜寻路径</span><br><span class="line">PWD=/bin   #当前用户所在的目录</span><br><span class="line">LANG=en_US.UTF-8   #当前系统的语系</span><br><span class="line">HOME=/root   #用户的home目录</span><br><span class="line">_=/bin/env  #上一次使用的命令的最后一个参数(或命令本身)</span><br></pre></td></tr></table></figure>
<p>以上是env命令显示的环境变量，其实用export命令也会输出一样的内容，只不过export还有其他的功能就是了。</p>
<hr>
<ul>
<li>用set列出所有的变量（自定义变量和环境变量）<br>在bash中我们不仅可以查看系统的环境变量，还可以查看用户的自定义变量，这时候就要用到set命令了，这里只列出一部分：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@bogon bin]# set</span><br><span class="line">BASH=/bin/bash           # bash 的主程序放置路径</span><br><span class="line">BASH_VERSINFO=([0]=&quot;4&quot; [1]=&quot;1&quot; [2]=&quot;2&quot; [3]=&quot;1&quot; [4]=&quot;release&quot; [5]=&quot;x86_64-redhat-linux-gnu&quot;)     # bash 的版本</span><br><span class="line">BASH_VERSION=&apos;4.1.2(1)-release&apos;  # 也是 bash 的版本</span><br><span class="line">COLORS=/etc/DIR_COLORS      # 使用的颜色纪录文件</span><br><span class="line">COLUMNS=115              # 在目前的终端机环境下，使用的字段有几个字符长度</span><br><span class="line">HISTFILE=/root/.bash_history      # 历史命令记录的放置文件，隐藏档</span><br><span class="line">HISTFILESIZE=1000        # 存起来(与上个变量有关)的文件之命令的最大纪录笔数。</span><br><span class="line">HISTSIZE=1000            # 目前环境下，可记录的历史命令最大笔数。</span><br><span class="line">HOSTTYPE=x86_64 		 # 主机安装的软件主要类型。</span><br><span class="line">IFS=$&apos; \t\n&apos;             # 默认的分隔符</span><br><span class="line">LINES=35                 # 目前的终端机下的最大行数</span><br><span class="line">MACHTYPE=i686-redhat-linux-gnu    # 安装的机器类型</span><br><span class="line">MAILCHECK=60             # 与邮件有关。每 60 秒去扫瞄一次信箱有无新信！</span><br><span class="line">OLDPWD=/home             # 上个工作目录。我们可以用 cd - 来取用这个变量。</span><br><span class="line">OSTYPE=linux-gnu         # 操作系统的类型！</span><br><span class="line">PPID=20025               # 父程序的 PID </span><br><span class="line">PS1=&apos;[\u@\h \W]\$ &apos;      # 命令提示字符，也就是我们常见[root@www ~]# 或 [dmtsai ~]$ 的配置值,可以更动。</span><br><span class="line">PS2=&apos;&gt; &apos;                 # 如果你使用跳脱符号 (\) 第二行以后的提示字符</span><br><span class="line">name=Joea                # 刚刚配置的自定义变量也可以被列出来</span><br><span class="line">$                        # 目前这个 shell 所使用的 PID</span><br><span class="line">?                        # 刚刚运行完命令的回传值。</span><br></pre></td></tr></table></figure>
<p>上面列出的这些变量比较指的注意的有:</p>
<ol>
<li>PS1:  提示字符的配置<br>PS1的作用就是显示命令行开头内容的格式如：[root@bogon bin]。下面列出了不同字符代表的不同含义：<ol>
<li>\d ：可显示出『星期 月 日』的日期格式，如：”Mon Feb 2”</li>
<li>\H ：完整的主机名</li>
<li>\h ：仅取主机名在第一个小数点之前的名字</li>
<li>\t ：显示时间，为 24 小时格式的『HH:MM:SS』</li>
<li>\T ：显示时间，为 12 小时格式的『HH:MM:SS』</li>
<li>\A ：显示时间，为 24 小时格式的『HH:MM』</li>
<li>\@ ：显示时间，为 12 小时格式的『am/pm』样式</li>
<li>\u ：目前使用者的账号名称，如『root』</li>
<li>BASH 的版本信息</li>
<li>完整的工作目录名称，由根目录写起的目录名称。但home目录会以 ~ 取代</li>
<li>利用 basename 函数取得工作目录名称，所以仅会列出最后一个目录名</li>
<li>下达的第几个命令</li>
<li>提示字符，如果是 root 时，提示字符为 # ，否则就是 $<br>可以通过一下方式来更改PS1的显示格式：</li>
</ol>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@bogon bin]# PS1=&apos;[\u@\h \w \A]\$&apos;</span><br><span class="line">[root@bogon /bin 01:19]#</span><br></pre></td></tr></table></figure>
<ol>
<li>$: 当前shell的PID<br>想不到吧，$本身也是个变量，它代表当前shell的PID(Process ID)。我们可以通过 echo $$ 来获取$的值</li>
<li>?: 上个运行命令的回传值<br>没错，?也是一个特殊的变量，它代表上一条命令的回传值，一般来说0代表上调命令运行成功，非0代表上条命令运行失败。</li>
</ol>
<hr>
<ul>
<li>export: 自定义变量转成环境变量<br>谈了env和set之后，我们看一下环境变量和自定义变量的差异，其实根本区别就在于<em>能不能被子进程所引用</em>罢了。<br>当你登录Linux并且获取一个bash之后，bash就成为一个独立的进程了。接下来通过这个bash下达的命令都是这个bash的子进程，那么如果在当前bash下执行bash指令，那么我们就进入了一个子bash。执行exit指令，则退出到上一个bash。如下图所示：</li>
</ul>
<p><img src="/images/程序相关示意图.jpg" alt="程序相关示意图"></p>
<p>如上所示，我们在原本的 bash 底下运行另一个 bash ，结果操作的环境接口会跑到第二个 bash 去(就是子程序)， 那原本的 bash 就会在暂停的情况 (睡着了，就是 sleep)。整个命令运行的环境是实线的部分！若要回到原本的 bash 去， 就只有将第二个 bash 结束掉 (下达 exit 或 logout) 才行。</p>
<p>既然我们跳到了子进程中，那么父进程的自定义变量我们自然就不能再继续引用了，但是父进程的环境变量，子进程依然可以引用。所以当我们需要在子进程中调用父进程的自定义变量，就要用到 export 命令了。如你想要让自定义变量内容继续的在子程序中使用，那么就请运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@bogon bin]# export 变量名称</span><br></pre></td></tr></table></figure>
<p>export用在配置自己的文件呼叫环境时十分有用，值得注意的是，这种环境变量的配置方法是临时的，当你退出bash之后，配置将失效。如果仅下达 export 而没有接变量时，那么此时将会把所有的环境变量列出来，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#只列出一部分</span><br><span class="line">declare -x MAIL=&quot;/var/spool/mail/root&quot;</span><br><span class="line">declare -x OLDPWD=&quot;/root&quot;</span><br><span class="line">declare -x PATH=&quot;/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin&quot;</span><br><span class="line">declare -x PWD=&quot;/bin&quot;</span><br><span class="line">declare -x SELINUX_LEVEL_REQUESTED=&quot;&quot;</span><br><span class="line">declare -x SELINUX_ROLE_REQUESTED=&quot;&quot;</span><br><span class="line">declare -x SELINUX_USE_CURRENT_RANGE=&quot;&quot;</span><br><span class="line">declare -x SHELL=&quot;/bin/bash&quot;</span><br><span class="line">declare -x SHLVL=&quot;1&quot;</span><br><span class="line">declare -x SSH_ASKPASS=&quot;/usr/libexec/openssh/gnome-ssh-askpass&quot;</span><br><span class="line">declare -x SSH_CLIENT=&quot;192.168.137.1 1626 22&quot;</span><br><span class="line">declare -x SSH_CONNECTION=&quot;192.168.137.1 1626 192.168.137.2 22&quot;</span><br><span class="line">declare -x SSH_TTY=&quot;/dev/pts/0&quot;</span><br><span class="line">declare -x TERM=&quot;xterm&quot;</span><br><span class="line">declare -x USER=&quot;root&quot;</span><br></pre></td></tr></table></figure>
<hr>
<p>###declare，read和array</p>
<ul>
<li>declare：声明变量的类型</li>
</ul>
<p>看到上面export的无参数输出，你可能会疑问，<em>declare -x</em>是干什么？事实上declare是用来声明变量类型的，如Java中的基本数据类型有int，float，double等等。shell也有自己的数据类型。如果declare后面不跟任何的参数，那么bash就会把所有的变量名称和内容都输出到屏幕，和set一样。和declare功能一样的还有typeset。先看下面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@bogon ~]# declare [-aixr] variable</span><br><span class="line">##选项与参数：</span><br><span class="line">-p: 如果后面没有参数，则bash会将当前shell中的所有变量都列出来，如果后面跟了变量名称，bash会将当前shell中对应的变量名称和变量内容输出。</span><br><span class="line">-a: 将后面名为 variable 的变量定义成为数组 (array) 类型</span><br><span class="line">-i: 将后面名为 variable 的变量定义成为整数数字 (integer) 类型</span><br><span class="line">-x: 用法与 export 一样，就是将后面的 variable 变成环境变量</span><br><span class="line">-r: 将变量配置成为 readonly 类型，该变量不可被更改内容，也不能 unset</span><br><span class="line"></span><br><span class="line">[root@bogon ~]# sum=1+2+3</span><br><span class="line">[root@bogon ~]# echo $sum</span><br><span class="line">1+2+3  #这里1+2+3被认为是字符串，shell中的算术运算一般通过expr来实现</span><br><span class="line">[root@bogon ~]# declare -i sum=1+2+3</span><br><span class="line">[root@bogon ~]# echo $sum</span><br><span class="line">6</span><br></pre></td></tr></table></figure>
<p>由于在默认的情况底下， bash 对于变量有几个基本的定义：</p>
<ul>
<li>变量类型默认为『字符串』，所以若不指定变量类型，则 1+2 为一个『字符串』而不是『计算式』。 所以上述第一个运行的结果才会出现那个情况的；</li>
<li>bash 环境中的数值运算，默认最多仅能到达整数形态，所以 1/3 结果是 0；</li>
</ul>
<p>declare是一个比较有用的功能，尤其是操作数组的时候，它可以帮我们生命数组的属性。比较有趣的是，如果你不小心把变量配置成了『只读』，那么你就只能注销登录才能复原该变量类型了。</p>
<ul>
<li>array: 数组</li>
</ul>
<p>一些时候我们必须通过数组来声明一些变量，在shell中用括号来表示数组，数组元素用『空格』来分隔，和大部分语言一样，数组的下标从0开始。数组的定义一般如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@bogon ~]# arr_name=(value0 value1 value2)</span><br></pre></td></tr></table></figure>
<p>或者单独定义数组的个个分量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@bogon ~]# arr_name[0]=value0</span><br><span class="line">[root@bogon ~]# arr_name[1]=value1</span><br><span class="line">[root@bogon ~]# arr_name[2]=value2</span><br></pre></td></tr></table></figure>
<p>读取数组的一般格式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon ~]# echo $arr_name[0]</span><br><span class="line">[root@bogon ~]# value0</span><br><span class="line">[root@bogon ~]# echo $arr_name[1]</span><br><span class="line">[root@bogon ~]# value1</span><br><span class="line">[root@bogon ~]# echo $arr_name</span><br><span class="line">[root@bogon ~]# value0  #如果数组名后面不加下标，则输出arr_name[0]</span><br></pre></td></tr></table></figure>
<p>数组总还有获取数组长度的方法，和获取字符串长度的方法相同：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 取得数组元素的个数</span><br><span class="line">[root@bogon ~]# length=$&#123;#arr_name[@]&#125;</span><br><span class="line"># 或者</span><br><span class="line">[root@bogon ~]# length=$&#123;#arr_name[*]&#125;</span><br><span class="line"># 取得数组单个元素的长度</span><br><span class="line">[root@bogon ~]# lengthn=$&#123;#arr_name[n]&#125;</span><br></pre></td></tr></table></figure>
<p>使用@ 或 * 可以获取数组中的所有元素：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@bogon ~]# $&#123;array_name[*]&#125;</span><br><span class="line">[root@bogon ~]# $&#123;array_name[@]</span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>read: 读取标准输入<br>要读取来自键盘输入的变量，就是用 read 这个命令了。read 之后不加任何参数，直接加上变量名称，那么底下就会主动出现一个空白行等待你的输入。如果加上 -t 后面接秒数，那么 t 秒之内没有任何动作时， 该命令就会自动略过了。如果是加上 -p ，在输入的光标前就会有比较多可以用的提示字符给我们参考。如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@bogon ~]# read [-pt] variable</span><br><span class="line">选项与参数：</span><br><span class="line">-p  ：后面可以接提示字符</span><br><span class="line">-t  ：后面可以接等待的『秒数』</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@bogon ~]# read atest</span><br><span class="line">This is a test        #此时光标会等待你输入</span><br><span class="line">[root@bogon~]# echo $atest</span><br><span class="line">This is a test          #你刚刚输入的数据已经变成一个变量内容！</span><br><span class="line"></span><br><span class="line">#提示使用者 30 秒内输入named</span><br><span class="line">[root@bogon ~]# read -p &quot;Please keyin your name: &quot; -t 30 named</span><br><span class="line">Please keyin your name: Joea   #注意看，会有提示字符喔！</span><br><span class="line">[root@bogon ~]# echo $named</span><br><span class="line">Joea        #输入的数据又变成一个变量的内容了！</span><br></pre></td></tr></table></figure>

        </div>
        <footer class="article-footer">
            

    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">分享到：</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>



        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div class="ds-thread" data-thread-key="2016/05/20/shell 初识：shell中的变量/" data-title="shell 初识：shell中的变量" data-url="http://yoursite.com/2016/05/20/shell 初识：shell中的变量/"></div>
    <style>
        #ds-thread #ds-reset .ds-textarea-wrapper {
            background: none;
        }
        #ds-reset .ds-avatar img {
            box-shadow: none;
        }
        #ds-reset .ds-gradient-bg {
            background: #f7f7f7;
        }
        #ds-thread #ds-reset li.ds-tab a {
            border-radius: 3px;
        }
        #ds-thread #ds-reset .ds-post-button {
            color: white;
            border: none;
            box-shadow: none;
            background: #d32;
            text-shadow: none;
            font-weight: normal;
            font-family: 'Microsoft Yahei';
        }
        #ds-thread #ds-reset .ds-post-button:hover {
            color: white;
            background: #DE594C;
        }
        #ds-thread #ds-reset .ds-post-button:active {
            background: #d32;
        }
        #ds-smilies-tooltip ul.ds-smilies-tabs li a.ds-current {
            color: white;
            background: #d32;
            box-shadow: none;
            text-shadow: none;
            font-weight: normal;
        }
    </style>

    
    </section>

                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/joeapang" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="http://weibo.com/5051634717/profile?rightmod=1&wvr=6&mod=personinfo" target="_blank">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2016/05/19/小幸运/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">小幸运</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">近期动态</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/05/20/shell 初识：shell中的变量/" class="thumbnail">
    
    
        <span style="background-image:url(/images/程序相关示意图.jpg)" alt="shell 初识：shell中的变量" class="thumbnail-image"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/博客/">博客</a></p>
                            <p class="item-title"><a href="/2016/05/20/shell 初识：shell中的变量/" class="title">shell 初识：shell中的变量</a></p>
                            <p class="item-date"><time datetime="2016-05-20T05:37:51.000Z" itemprop="datePublished">2016-05-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/05/19/小幸运/" class="thumbnail">
    
    
        <span style="background-image:url(/images/小幸运.jpg)" alt="小幸运" class="thumbnail-image"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/一生所爱/">一生所爱</a></p>
                            <p class="item-title"><a href="/2016/05/19/小幸运/" class="title">小幸运</a></p>
                            <p class="item-date"><time datetime="2016-05-19T11:40:08.000Z" itemprop="datePublished">2016-05-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/05/19/稳稳的幸福/" class="thumbnail">
    
    
        <span style="background-image:url(/images/稳稳的幸福.jpg)" alt="稳稳的幸福" class="thumbnail-image"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/一生所爱/">一生所爱</a></p>
                            <p class="item-title"><a href="/2016/05/19/稳稳的幸福/" class="title">稳稳的幸福</a></p>
                            <p class="item-date"><time datetime="2016-05-19T11:37:25.000Z" itemprop="datePublished">2016-05-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/05/19/偶阵雨/" class="thumbnail">
    
    
        <span style="background-image:url(/images/偶阵雨.jpg)" alt="偶阵雨" class="thumbnail-image"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/一生所爱/">一生所爱</a></p>
                            <p class="item-title"><a href="/2016/05/19/偶阵雨/" class="title">偶阵雨</a></p>
                            <p class="item-date"><time datetime="2016-05-19T11:34:30.000Z" itemprop="datePublished">2016-05-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/05/19/一家一/" class="thumbnail">
    
    
        <span style="background-image:url(/images/一家一.jpg)" alt="一家一" class="thumbnail-image"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/一生所爱/">一生所爱</a></p>
                            <p class="item-title"><a href="/2016/05/19/一家一/" class="title">一家一</a></p>
                            <p class="item-date"><time datetime="2016-05-19T11:29:53.000Z" itemprop="datePublished">2016-05-19</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/一生所爱/">一生所爱</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/博客/">博客</a><span class="category-list-count">4</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">12</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/一生所爱/">一生所爱</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a><span class="tag-list-count">2</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Shell/" style="font-size: 10px;">Shell</a> <a href="/tags/一生所爱/" style="font-size: 20px;">一生所爱</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
                    <li>
                        <a href="http://weibo.com/5051634717/profile?rightmod=1&wvr=6&mod=personinfo">weibo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2016 Joea</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'joea'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>



    
        <script src="/vendor/fancybox/jquery.fancybox.pack.js"></script>
    

    
        <script src="/vendor/scrollLoading/jquery.scrollLoading.js"></script>
        <script src="/vendor/scrollLoading/main.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
